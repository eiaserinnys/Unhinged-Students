# UI 개선 및 전투 피드백 시스템

**생성일:** 2026-01-18
**상태:** 대기 중

## 목표

게임 제목 한글화 및 전투 피드백(마이크로 리액션, 넉백) 시스템 구현

## 대기 중

### 1. 게임 제목 한글화
- [x] 게임 제목을 "Unhinged Students"에서 "미친 제자들"로 변경
- [x] index.html의 title 태그 변경
- [x] 게임 내 로고/타이틀 표시가 있다면 함께 변경

### 2. 마이크로 리액션 (피격 피드백)
- [x] 피격 시 캐릭터 빨간색 틴트 효과 적용
- [x] 0.1초(100ms) 동안 빨간색에서 원래 색으로 서서히 페이드
- [x] 플레이어 캐릭터에 적용
- [x] 원격 플레이어에 적용
- [x] 더미에 적용

### 3. 넉백 시스템 - 기본 구조
- [x] 넉백 상태 변수 추가 (isKnockedBack, knockbackEndTime 등)
- [x] 넉백 거리 계산 로직 (가까울수록 더 멀리)
  - 기준: 공격 범위 내에서 거리에 반비례
- [x] 방향 벡터가 0일 때 랜덤 방향 처리
  - 위치가 완전히 동일한 경우 대비

### 4. 넉백 시스템 - 동작 및 제약
- [x] 넉백 중 이동 입력 무시 (락 상태)
- [x] 넉백 중 추가 공격 면역 (무적 상태)
- [x] 넉백 애니메이션 (시작 위치 → 종료 위치 이동)

### 5. 넉백 시스템 - 동기화
- [x] 로컬 클라이언트에서 넉백 연출 처리
- [x] 시작 위치: 각 클라이언트의 로컬 위치 사용
- [x] 종료 위치: 서버에서 지정한 위치로 수렴
- [x] 서버에서 넉백 종료 위치 계산 및 브로드캐스트

### 6. 더미 넉백 처리
- [x] 더미에 넉백 상태 변수 추가
- [x] 더미 피격 시 넉백 적용
- [x] 더미 넉백 동기화 (서버 권위적)

### 7. 테스트 케이스
- [ ] 마이크로 리액션 테스트
  - 피격 시 빨간색 틴트가 즉시 적용되는지 확인
  - 0.1초 내에 원래 색으로 페이드되는지 확인
  - 플레이어/원격 플레이어/더미 모두 동작 확인
- [ ] 넉백 기본 동작 테스트
  - 피격 시 넉백이 발생하는지 확인
  - 가까울수록 더 멀리 밀리는지 확인
  - 위치 동일 시 랜덤 방향으로 밀리는지 확인
- [ ] 넉백 제약 테스트
  - 넉백 중 이동 입력이 무시되는지 확인
  - 넉백 중 추가 공격이 무시되는지 확인
- [ ] 넉백 동기화 테스트
  - 넉백 종료 후 서버 지정 위치에 도달하는지 확인
  - 멀티플레이어 환경에서 동기화 확인
- [ ] 더미 넉백 테스트
  - 더미 피격 시 넉백 발생 확인
  - 더미 넉백 후 위치 동기화 확인

## 진행 중

### 8. 공격 범위 표시 개선
- [x] 반투명 빨강 원으로 공격 범위 표시
- [x] 서서히 사라지는 효과 (fade out)
- [x] 다른 플레이어 공격 동기화
  - 서버에서 playerAttacked 이벤트 브로드캐스트
  - 클라이언트에서 원격 플레이어 공격 효과 표시

## 기술 노트

### 마이크로 리액션 구현 방향
- Canvas globalCompositeOperation 또는 tint 효과 사용
- 시간 기반 색상 보간 (lerp)
- deltaTime 기반으로 0.1초 동안 페이드

### 넉백 거리 공식 (예시)
```javascript
// 거리가 가까울수록 더 멀리 밀림
const distance = Math.sqrt((attacker.x - target.x)**2 + (attacker.y - target.y)**2);
const maxKnockback = 100; // 최대 넉백 거리
const minKnockback = 30;  // 최소 넉백 거리
const attackRange = 150;  // 공격 범위

// 거리에 반비례하여 넉백 거리 계산
const knockbackDistance = maxKnockback - (distance / attackRange) * (maxKnockback - minKnockback);
```

### 동기화 전략
- 넉백 연출은 각 클라이언트가 독립적으로 처리 (시각적 차이 허용)
- 넉백 종료 후 위치는 서버 권위적으로 일치시킴
- 이를 통해 네트워크 지연에도 부드러운 연출 보장

## 완료

(아직 없음)
