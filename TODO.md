# TODO

## 완료
- [x] 프로젝트 초기 설정
- [x] 개발 가이드라인 작성 (CLAUDE.md)
- [x] Claude 규칙 설정 (.claude/rules)
- [x] TODO.md 작업 관리 시스템 도입
- [x] .gitignore에 로컬 설정 파일 제외 설정
- [x] CLAUDE.md에 기획서 참조 추가 (docs/ 디렉토리)
- [x] 0단계: 개발 준비 완료
  - [x] 프로젝트 기술 스택 결정 (순수 HTML5 Canvas + JavaScript)
  - [x] 기본 HTML 파일 생성 (index.html)
  - [x] 캔버스 렌더링 환경 구축 (game.js)
  - [x] 입력 시스템 구현 (input.js - 키보드/마우스/터치)
  - [x] 입력 테스트 코드 작성 (test/input.test.html)
  - [x] 브라우저에서 동작 확인 및 테스트 완료
- [x] Phase 1: 캐릭터 표시 및 이동
  - [x] 외계인 이미지 로드 (asset/image/alien.png)
  - [x] 캐릭터를 화면 중앙에 표시
  - [x] 입력으로 캐릭터 이동 (기존 input.js 활용)
  - [x] 캐릭터 이동 테스트 및 확인
  - [x] 전체 화면 캔버스 구현
  - [x] LOL 스타일 캐릭터 크기 조정
- [x] Phase 2: 샤드 시스템
  - [x] 샤드 오브젝트 생성 (바닥에 랜덤 배치)
  - [x] 샤드 렌더링 (다이아몬드 모양 + 펄스 애니메이션)
  - [x] 충돌 감지 시스템 구현
  - [x] 샤드 획득 로직 (캐릭터가 샤드 위로 가면 획득)
  - [x] 샤드 획득 시 사라지는 효과
  - [x] 수집 통계 UI 표시
- [x] CLAUDE.md에 프로젝트 구조 및 실행 방법 문서화
- [x] .claude/rules에 문서 관리 규칙 추가
  - [x] CLAUDE.md 프로젝트 구조 갱신 규칙
  - [x] 작업 현황은 TODO.md에만 기록 규칙
- [x] CLAUDE.md에서 작업 현황 제거 및 TODO.md 참조 추가
- [x] organize-claude-md 스킬 추가
- [x] CLAUDE.md 모듈화 및 규칙 분리
- [x] Phase 3: 레벨 시스템
  - [x] 레벨 변수 추가 (시작 레벨 1)
  - [x] 샤드 획득 시 레벨 증가
  - [x] 화면에 레벨 숫자 표시 (UI)
  - [x] 레벨업 테스트 코드 작성 (test/level.test.html)
  - [x] 레벨업 테스트 및 확인
  - [x] Phase 3 추가: 경험치 시스템 및 밸런싱
    - [x] 경험치 시스템 구현 (레벨별 필요 경험치 증가)
    - [x] 최대 레벨 30 설정
    - [x] 샤드 리스폰 시스템 (5초마다, 5-10개)
    - [x] 최대 활성 샤드 제한 (40개)
    - [x] 20분 게임 밸런싱

  - [x] Phase 3 추가: 캐릭터 정보 표시
    - [x] 캐릭터 머리 위에 플레이어 이름 표시 (마나리)
    - [x] 캐릭터 머리 위에 레벨 표시
    - [x] 캐릭터 머리 위에 더미 HP 바 표시
    - [x] 플레이어 정보에 텍스트 그림자 효과 추가

- [x] 4️⃣ 멀티플레이 전환 (최소)
  - [x] 서버 설정
    - [x] Node.js 프로젝트 초기화 (package.json)
    - [x] Socket.io 서버 설치 및 설정
    - [x] 기본 WebSocket 서버 구현 (포트: 3000)
    - [x] 서버 시작 스크립트 작성 (npm start)
  - [x] 클라이언트 구현
    - [x] Socket.io 클라이언트 라이브러리 추가
    - [x] 네트워크 모듈 생성 (src/network.js)
    - [x] NetworkManager 클래스 구현
    - [x] 서버 연결 로직 구현
    - [x] 플레이어 ID 할당 및 관리
    - [x] 연결/해제 이벤트 핸들링
  - [x] 위치 동기화
    - [x] 자신의 위치를 서버로 전송 (20 updates/sec)
    - [x] 다른 플레이어 위치 수신 및 저장
    - [x] RemotePlayer 클래스 구현
    - [x] 플레이어 목록 관리 (Map 사용)
    - [x] 보간(interpolation)으로 부드러운 움직임
  - [x] game.js 멀티플레이어 통합
    - [x] NetworkManager 초기화
    - [x] 위치 업데이트 전송
    - [x] 원격 플레이어 렌더링
    - [x] 연결 상태 및 플레이어 수 UI 표시

- [x] 채팅 시스템 추가
  - [x] 서버 측 채팅 메시지 브로드캐스트
  - [x] 채팅 UI (입력창, 메시지 표시)
  - [x] ChatManager 클래스 구현
  - [x] 채팅 입력 중 캐릭터 이동 방지
  - [x] Enter 키로 채팅 입력/전송
  - [x] 시스템 메시지 표시
  - [x] 캐릭터 머리 위 말풍선 표시 (3초간 표시)
  - [x] 채팅 메시지 말풍선 동기화 (모든 플레이어)

- [x] UI/UX 개선
  - [x] 고정된 16:9 게임 월드 구현 (1920x1080)
  - [x] 화면 크기에 맞춰 스케일링 및 센터링
  - [x] RemotePlayer 외계인 이미지 적용
  - [x] 서버 재시작 시 클라이언트 자동 리로드
  - [x] Google Fonts Inter 적용 (모던 디자인)
  - [x] 폰트 크기 증가 (채팅 16px, 이름 16px, 말풍선 20px)
  - [x] 세련된 색상 조합 (사이안/퍼플/터쿼이즈)

- [x] 멀티플레이어 테스트 및 최적화
  - [x] 멀티 브라우저 동시 테스트
  - [x] 위치 동기화 정확도 확인
  - [x] 네트워크 다른 기기 연결 수정

- [x] 프레임 레이트 독립적 이동 시스템
  - [x] Delta time 기반 이동 시스템 구현
  - [x] game.js에 delta time 계산 추가
  - [x] Character.update에 deltaTime 파라미터 추가
  - [x] 속도를 픽셀/초 단위로 변경 (300px/s)
  - [x] 테스트 파일 업데이트 (deltaTime 전달)
  - [x] Delta time 캡핑 (0.1초 최대)

- [x] 샤드 동기화
  - [x] 서버 측 샤드 생성 및 관리
  - [x] 샤드 수집 이벤트 동기화
  - [x] 샤드 리스폰 시스템
  - [x] 샤드 수집 파티클 이펙트 (20개 파티클)
  - [x] 클라이언트 샤드 데이터 서버 동기화

- [x] 성능 최적화
  - [x] 샤드 이펙트 최대 개수 제한 (10개 캡)

- [x] Phase 4: 체력 및 전투
  - [x] 공격 시스템 기본 구조 (스페이스바)
  - [x] 공격 이펙트 및 애니메이션 (확장하는 빨간 원)
  - [x] 공격 범위 및 충돌 감지 (150px 반경)
  - [x] 데미지 처리 및 체력 감소 (공격력 10)
  - [x] 테스트용 더미 적 3개 생성
  - [x] 전투 시스템 테스트 파일 작성 (test/combat.test.html)

## 진행 중
### 4️⃣ 멀티플레이 전환 - 동기화 완성
- [ ] 네트워크 지연 처리 검증
- [ ] 경험치 동기화 (레벨은 동기화됨)

## 대기 중
### 1단계: 게임 플레이 MVP (로컬) - 보류
#### Phase 5: 사망 및 리스폰
- [ ] 체력 0 시 사망 처리
- [ ] 사망 화면 표시 (간단한 텍스트)
- [ ] 리스폰 타이머 구현
- [ ] 리스폰 시 캐릭터 부활 (체력 회복, 위치 초기화)
- [ ] 전체 루프 테스트

### 2단계: 로컬 팀전 확장

### 추후 작업
- [ ] 테스트 환경 설정
- [ ] CI/CD 파이프라인 구축

---

## 작업 관리 가이드

이 파일은 프로젝트의 모든 작업을 추적합니다.

**사용 방법:**
1. 새 작업 시작 전 '진행 중'에 추가
2. 작업 완료 시 '완료'로 이동하고 [x] 체크
3. 커밋 전 반드시 이 파일 업데이트
4. 새로운 아이디어나 버그는 '대기 중'에 기록
