# Claude 개발 가이드라인

이 문서는 Unhinged Students 프로젝트에서 Claude가 코드를 작성할 때 따라야 할 규칙과 가이드라인을 정의합니다.

## 📋 프로젝트 기획서

**모든 개발 작업은 반드시 기획서를 참고해야 합니다.**

기획서는 `docs/` 디렉토리에 위치합니다:

- **`docs/overview.md`** - 게임 전체 개요 및 스크린 플로우
  - 게임 기본 메커니즘 (5 vs 5 팀전)
  - 전체 스크린 플로우 (접속 → 로비 → 게임 → 결과 → 보상)
  - 각 화면의 역할과 구성 요소
  - 재화 시스템 (루비, 다이아)

- **`docs/characters.md`** - 캐릭터 상세 스펙
  - 외계인 (기본 캐릭터)
  - 눈 돌아가는 사람
  - 카레 곰돌이 (탱커)
  - 헐크 언니
  - 찍찍찍찍찍 (트릭형)
  - 선생님 (위장 능력)

- **`docs/production.md`** - 린 개발 순서
  - 단계별 구현 계획
  - MVP부터 확장하는 개발 전략
  - 로컬 → 멀티 → 스크린 확장 순서

**개발 시 주의사항:**
- 기능 구현 전 반드시 해당 기획서 섹션을 읽고 이해
- 기획서와 다른 방향으로 구현하지 않기
- 불명확한 부분은 사용자에게 질문하기
- `docs/production.md`의 개발 순서를 따르기

## 핵심 원칙

### 1. 테스트 주도 개발 (Test-Driven Development)

모든 코드 변경은 테스트 코드와 함께 작성되어야 합니다.

**필수 사항:**
- 새로운 기능을 구현할 때는 테스트 코드를 먼저 또는 함께 작성
- 버그 수정 시 해당 버그를 재현하는 테스트 케이스 작성
- 리팩토링 전후 테스트 실행으로 동작 보장

### 2. 실행 전 테스트 실행

코드를 실행하거나 배포하기 전에 반드시 테스트를 실행해야 합니다.

**실행 순서:**
1. 코드 작성/수정
2. 테스트 코드 작성/수정
3. **테스트 실행 및 통과 확인**
4. 코드 실행 또는 배포

**테스트 실패 시:**
- 코드를 실행하거나 커밋하지 않음
- 실패 원인을 분석하고 수정
- 모든 테스트가 통과할 때까지 반복

### 3. 테스트 성공 후 커밋 & 푸시

테스트가 모두 통과한 후에만 변경사항을 커밋하고 푸시합니다.

**커밋 워크플로우:**
1. ✅ 모든 테스트 통과 확인
2. **TODO.md 업데이트** (완료된 작업 체크, 새로운 작업 추가)
3. 변경사항 스테이징 (`git add`)
4. 의미 있는 커밋 메시지 작성
5. 커밋 생성
6. 원격 저장소에 푸시

**금지 사항:**
- ❌ 테스트 실패 상태에서 커밋
- ❌ 테스트 없이 코드만 커밋
- ❌ 테스트를 건너뛰고 푸시
- ❌ TODO.md 업데이트 없이 커밋

## 작업 관리

### TODO.md로 작업 목록 관리

모든 작업은 `TODO.md` 파일에 기록하고 관리합니다.

**TODO.md 관리 규칙:**
- 새로운 작업을 시작하기 전에 TODO.md에 작업 항목 추가
- 작업 완료 시 체크박스 체크 또는 완료 표시
- 커밋하기 전에 반드시 TODO.md 업데이트
- 작업 중 발견된 추가 작업도 즉시 TODO.md에 기록

**TODO.md 형식 예시:**
```markdown
## 진행 중
- [ ] 사용자 인증 기능 구현
- [ ] 게임 메인 화면 UI

## 완료
- [x] 프로젝트 초기 설정
- [x] 개발 가이드라인 작성

## 대기 중
- [ ] 점수 시스템 구현
- [ ] 멀티플레이어 기능
```

### 점진적 개발 (Incremental Development)

복잡한 기능은 한 번에 만들지 않고 작은 단위로 나누어 개발합니다.

**점진적 개발 프로세스:**
1. **기능 분해:** 큰 기능을 작고 독립적인 단위로 분해
2. **최소 구현:** 가장 작은 동작하는 단위를 먼저 구현
3. **테스트 & 커밋:** 작은 단위마다 테스트하고 커밋
4. **플레이테스트:** 실제로 실행하여 동작 확인
5. **피드백 요청:** 사용자에게 의견을 구하고 다음 단계 결정
6. **반복:** 피드백을 반영하여 다음 단위 구현

**예시:**
- ❌ 나쁜 예: "완전한 인벤토리 시스템을 한 번에 구현"
- ✅ 좋은 예:
  1. 먼저 아이템을 화면에 표시
  2. 플레이테스트 후 피드백
  3. 아이템 클릭 기능 추가
  4. 플레이테스트 후 피드백
  5. 아이템 사용 기능 추가
  6. 계속 점진적으로 확장

**장점:**
- 빠른 피드백으로 방향 수정 가능
- 작은 단위로 테스트하여 버그 발견 용이
- 각 단계마다 동작하는 코드 유지
- 오버엔지니어링 방지

## 테스트 작성 가이드

### 테스트 범위

- **단위 테스트 (Unit Tests):** 개별 함수/메서드의 동작 검증
- **통합 테스트 (Integration Tests):** 모듈 간 상호작용 검증
- **E2E 테스트 (End-to-End Tests):** 사용자 시나리오 검증

### 테스트 품질 기준

- 테스트는 명확하고 읽기 쉬워야 함
- 각 테스트는 하나의 케이스만 검증
- 테스트 간 의존성이 없어야 함
- 빠르게 실행되어야 함

## 예외 상황

다음 경우에는 테스트 없이 커밋할 수 있습니다:
- 문서(README, 주석 등)만 수정한 경우
- 설정 파일만 변경한 경우
- 프로젝트 초기 설정 단계

## 요약

### 전체 워크플로우

```
1. TODO.md에 작업 추가
   ↓
2. 작은 단위로 기능 분해
   ↓
3. 코드 작성 (최소 단위)
   ↓
4. 테스트 작성
   ↓
5. 테스트 실행
   ↓
6. ✅ 통과 → 7번으로
   ❌ 실패 → 3번으로 돌아가서 수정
   ↓
7. 플레이테스트
   ↓
8. TODO.md 업데이트
   ↓
9. 커밋 & 푸시
   ↓
10. 사용자에게 피드백 요청
   ↓
11. 피드백 반영하여 다음 단위로 (1번으로)
```

### 핵심 가이드라인

✅ **해야 할 것:**
- 작은 단위로 나누어 개발
- 테스트 먼저 작성하고 통과 확인
- TODO.md를 항상 최신 상태로 유지
- 각 단계마다 플레이테스트
- 사용자 피드백을 적극 수용

❌ **하지 말아야 할 것:**
- 복잡한 기능을 한 번에 구현
- 테스트 없이 커밋
- TODO.md 업데이트 없이 커밋
- 피드백 없이 다음 기능으로 진행

이 가이드라인을 준수하여 안정적이고 신뢰할 수 있는 코드베이스를 유지합니다.
